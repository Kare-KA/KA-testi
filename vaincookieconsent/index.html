<!DOCTYPE html>
<html>
<head>



<!-- Piwik Tag Manager -->
<script type="text/javascript">
(function(window, document, dataLayerName, id) {

  // Tarkistetaan tai luodaan dataLayer-niminen objekti ja asetetaan siihen aloitusaika
  window[dataLayerName] = window[dataLayerName] || [];
  window[dataLayerName].push({
    start: (new Date).getTime(),       // Tallennetaan aloitusaika
    event: "stg.start"                 // Lähetetään Tag Managerin käynnistystapahtuma "stg.start"
  });

  // Luodaan uusi script-elementti ja sijoitetaan se ensimmäisen scriptin eteen
  var scripts = document.getElementsByTagName('script')[0],
      tags = document.createElement('script');

  // Funktio evästeiden luomiseen
  function stgCreateCookie(a,b,c) {
    var d = "";
    if (c) {  // Jos evästeen voimassaoloaika on määritelty
      var e = new Date();
      e.setTime(e.getTime() + 24 * c * 60 * 60 * 1e3);  // Määritetään vanhenemisajaksi c päivää
      d = "; expires=" + e.toUTCString();               // Määritetään vanhenemispäivä evästeelle
      f = "; SameSite=Strict";                          // Asetetaan eväste SameSite=Strict-moodiin
    }
    document.cookie = a + "=" + b + d + f + "; path=/";  // Luodaan eväste annetulla nimellä, arvolla ja polulla
  }

  // Tarkistetaan, onko Tag Manager debug-tilassa (stg_debug)
  var isStgDebug = (window.location.href.match("stg_debug") || document.cookie.match("stg_debug")) && !window.location.href.match("stg_disable_debug");
  stgCreateCookie("stg_debug", isStgDebug ? 1 : "", isStgDebug ? 14 : -1);  // Luo debug-evästeen, joka on voimassa 14 päivää, jos debug-tila on aktiivinen

  // Kootaan query-parametrit mahdollisille data layer - ja debug-parametreille
  var qP = [];
  dataLayerName !== "dataLayer" && qP.push("data_layer_name=" + dataLayerName);  // Lisätään data layer -parametri, jos nimi on jotain muuta kuin "dataLayer"
  isStgDebug && qP.push("stg_debug");  // Lisätään debug-parametri, jos debug-tila on aktiivinen

  var qPString = qP.length > 0 ? ("?" + qP.join("&")) : "";  // Muodostetaan query-parametrit merkkijonoksi

  // Asetetaan Piwik PRO Tag Managerin JS-tiedoston lataus asynkronisesti
  tags.async = true;
  tags.src = "https://kare-ka.containers.piwik.pro/" + id + ".js" + qPString;  // Asetetaan Tag Managerin lähde-URL, mukaan lukien mahdolliset parametrit
  scripts.parentNode.insertBefore(tags, scripts);  // Lisätään luotu script ensimmäisen script-elementin eteen
  
  // Määritetään API-funktiot Piwik PRO:n tm (tag manager) ja cm (consent manager) komponenteille
  !function(a, n, i) {
    a[n] = a[n] || {};
    for (var c = 0; c < i.length; c++) !function(i) {
      a[n][i] = a[n][i] || {};
      a[n][i].api = a[n][i].api || function() {
        var a = [].slice.call(arguments, 0);
        "string" == typeof a[0] && window[dataLayerName].push({
          event: n + "." + i + ":" + a[0],  // Tallennetaan tapahtuma dataLayeriin muodossa "ppms.[komponentti]:[tapahtuma]"
          parameters: [].slice.call(arguments, 1)
        });
      }
    }(i[c]);
  }(window, "ppms", ["tm", "cm"]);  // ppms (Piwik PRO Management System) -komponentit ovat tag manager (tm) ja consent manager (cm)

})(window, document, 'dataLayer', '5b3fb268-b67c-45c6-8a58-a2fa7da17c0f');
</script>
<!-- End Piwik Tag Manager -->




</head>
<body>


<h1>Tällä sivulla testataan kävijäseurantaa ja evästekyselyä.</h1>
<h2>Piwik PRO Cookie consent</h2>
<p>I'm hosted with GitHub Pages.</p>
</body>
</html>